\section{anx\_\-write.h File Reference}
\label{anx__write_8h}\index{anx_write.h@{anx\_\-write.h}}


\subsection{Detailed Description}
Writer specific functions. 



{\tt \#include $<$annodex/anx\_\-types.h$>$}\par
\subsection*{Functions}
\begin{CompactItemize}
\item 
void {\bf anx\_\-init\_\-importers} (char $\ast$content\_\-type\_\-pattern)
\begin{CompactList}\small\item\em Initialise system importers matching a given content type pattern. \item\end{CompactList}\item 
long {\bf anx\_\-write\_\-get\_\-next\_\-page\_\-size} ({\bf ANNODEX} $\ast$annodex)
\begin{CompactList}\small\item\em Query the size of the next page to be written. \item\end{CompactList}\item 
int {\bf anx\_\-write\_\-import} ({\bf ANNODEX} $\ast$annodex, char $\ast$filename, char $\ast$id, char $\ast$content\_\-type, double seek\_\-offset, double seek\_\-end, int flags)
\begin{CompactList}\small\item\em Import a file into the current ANNODEX$\ast$ writer. \item\end{CompactList}\item 
int {\bf anx\_\-write\_\-set\_\-anno\_\-callbacks} ({\bf ANNODEX} $\ast$annodex, Anx\-Import\-Head import\_\-head\_\-callback, Anx\-Import\-Clip import\_\-clip\_\-callback, void $\ast$user\_\-data)
\begin{CompactList}\small\item\em Override the callbacks that importers should call when they wish to handle annotation elements. \item\end{CompactList}\item 
void $\ast$ {\bf anx\_\-write\_\-get\_\-anno\_\-user\_\-data} ({\bf ANNODEX} $\ast$annodex)
\begin{CompactList}\small\item\em Retrieve the user\_\-data associated with attached annotation import callbacks. \item\end{CompactList}\item 
int {\bf anx\_\-write\_\-set\_\-ii\_\-callback} ({\bf ANNODEX} $\ast$annodex, Anx\-Import\-Import import\_\-import\_\-callback, void $\ast$user\_\-data)
\begin{CompactList}\small\item\em Override the Import Import callback, used when an importer wishes to initiate further importing. \item\end{CompactList}\item 
void $\ast$ {\bf anx\_\-write\_\-get\_\-ii\_\-user\_\-data} ({\bf ANNODEX} $\ast$annodex)
\begin{CompactList}\small\item\em Retrieve the user\_\-data associated with attached recursive import callbacks. \item\end{CompactList}\item 
int {\bf anx\_\-insert\_\-clip} ({\bf ANNODEX} $\ast$annodex, double at\_\-time, Anx\-Clip $\ast$clip)
\begin{CompactList}\small\item\em Insert a clip into an ANNODEX$\ast$ writer. \item\end{CompactList}\item 
double {\bf anx\_\-writer\_\-get\_\-end} ({\bf ANNODEX} $\ast$annodex)\label{anx__write_8h_a8}

\item 
int {\bf anx\_\-writer\_\-set\_\-end} ({\bf ANNODEX} $\ast$annodex, double end\_\-time)\label{anx__write_8h_a9}

\item 
long {\bf anx\_\-write} ({\bf ANNODEX} $\ast$annodex, long n)
\begin{CompactList}\small\item\em Write to an annodex opened with {\bf anx\_\-open()}{\rm (p.\,\pageref{anx__general_8h_a3})} or {\bf anx\_\-open\_\-stdio()}{\rm (p.\,\pageref{anx__general_8h_a4})}. \item\end{CompactList}\item 
long {\bf anx\_\-write\_\-output} ({\bf ANNODEX} $\ast$annodex, unsigned char $\ast$buf, long n)
\begin{CompactList}\small\item\em Output data from an annodex into a memory buffer. \item\end{CompactList}\item 
int {\bf anx\_\-request\_\-header} ({\bf ANNODEX} $\ast$annodex)\label{anx__write_8h_a12}

\item 
int {\bf anx\_\-request\_\-media\_\-sync} ({\bf ANNODEX} $\ast$annodex)\label{anx__write_8h_a13}

\end{CompactItemize}


\subsection{Function Documentation}
\index{anx_write.h@{anx\_\-write.h}!anx_init_importers@{anx\_\-init\_\-importers}}
\index{anx_init_importers@{anx\_\-init\_\-importers}!anx_write.h@{anx\_\-write.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void anx\_\-init\_\-importers (char $\ast$ {\em content\_\-type\_\-pattern})}\label{anx__write_8h_a0}


Initialise system importers matching a given content type pattern. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em content\_\-type\_\-pattern}]A content type or range of content types \end{description}
\end{Desc}
\index{anx_write.h@{anx\_\-write.h}!anx_insert_clip@{anx\_\-insert\_\-clip}}
\index{anx_insert_clip@{anx\_\-insert\_\-clip}!anx_write.h@{anx\_\-write.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int anx\_\-insert\_\-clip ({\bf ANNODEX} $\ast$ {\em annodex}, double {\em at\_\-time}, Anx\-Clip $\ast$ {\em clip})}\label{anx__write_8h_a7}


Insert a clip into an ANNODEX$\ast$ writer. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em annodex}]An ANNODEX$\ast$ writer \item[{\em at\_\-time}]Time in seconds to schedule the clip \item[{\em clip}]a clip \end{description}
\end{Desc}
\index{anx_write.h@{anx\_\-write.h}!anx_write@{anx\_\-write}}
\index{anx_write@{anx\_\-write}!anx_write.h@{anx\_\-write.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}long anx\_\-write ({\bf ANNODEX} $\ast$ {\em annodex}, long {\em n})}\label{anx__write_8h_a10}


Write to an annodex opened with {\bf anx\_\-open()}{\rm (p.\,\pageref{anx__general_8h_a3})} or {\bf anx\_\-open\_\-stdio()}{\rm (p.\,\pageref{anx__general_8h_a4})}. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em annodex}]An ANNODEX$\ast$ writer \item[{\em n}]count of bytes to write \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the count of bytes actually written \end{Desc}
\index{anx_write.h@{anx\_\-write.h}!anx_write_get_anno_user_data@{anx\_\-write\_\-get\_\-anno\_\-user\_\-data}}
\index{anx_write_get_anno_user_data@{anx\_\-write\_\-get\_\-anno\_\-user\_\-data}!anx_write.h@{anx\_\-write.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ anx\_\-write\_\-get\_\-anno\_\-user\_\-data ({\bf ANNODEX} $\ast$ {\em annodex})}\label{anx__write_8h_a4}


Retrieve the user\_\-data associated with attached annotation import callbacks. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em annodex}]an ANNODEX$\ast$ handle \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the associated user\_\-data \end{Desc}
\index{anx_write.h@{anx\_\-write.h}!anx_write_get_ii_user_data@{anx\_\-write\_\-get\_\-ii\_\-user\_\-data}}
\index{anx_write_get_ii_user_data@{anx\_\-write\_\-get\_\-ii\_\-user\_\-data}!anx_write.h@{anx\_\-write.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ anx\_\-write\_\-get\_\-ii\_\-user\_\-data ({\bf ANNODEX} $\ast$ {\em annodex})}\label{anx__write_8h_a6}


Retrieve the user\_\-data associated with attached recursive import callbacks. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em annodex}]an ANNODEX$\ast$ handle \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the associated user\_\-data \end{Desc}
\index{anx_write.h@{anx\_\-write.h}!anx_write_get_next_page_size@{anx\_\-write\_\-get\_\-next\_\-page\_\-size}}
\index{anx_write_get_next_page_size@{anx\_\-write\_\-get\_\-next\_\-page\_\-size}!anx_write.h@{anx\_\-write.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}long anx\_\-write\_\-get\_\-next\_\-page\_\-size ({\bf ANNODEX} $\ast$ {\em annodex})}\label{anx__write_8h_a1}


Query the size of the next page to be written. 

\begin{Desc}
\item[Returns:]the size in bytes of the next page to be written \end{Desc}
\index{anx_write.h@{anx\_\-write.h}!anx_write_import@{anx\_\-write\_\-import}}
\index{anx_write_import@{anx\_\-write\_\-import}!anx_write.h@{anx\_\-write.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int anx\_\-write\_\-import ({\bf ANNODEX} $\ast$ {\em annodex}, char $\ast$ {\em filename}, char $\ast$ {\em id}, char $\ast$ {\em content\_\-type}, double {\em seek\_\-offset}, double {\em seek\_\-end}, int {\em flags})}\label{anx__write_8h_a2}


Import a file into the current ANNODEX$\ast$ writer. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em annodex}]An ANNODEX$\ast$ writer \item[{\em filename}]the file to import \item[{\em id}]the id of the file \item[{\em content\_\-type}]the content-type of the whole import file. \item[{\em seek\_\-offset}]a time in seconds to begin importing data from \item[{\em seek\_\-end}]a time in seconds to finish importing data \item[{\em flags}]writer import flags (RECURSIVE etc.) \end{description}
\end{Desc}
\index{anx_write.h@{anx\_\-write.h}!anx_write_output@{anx\_\-write\_\-output}}
\index{anx_write_output@{anx\_\-write\_\-output}!anx_write.h@{anx\_\-write.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}long anx\_\-write\_\-output ({\bf ANNODEX} $\ast$ {\em annodex}, unsigned char $\ast$ {\em buf}, long {\em n})}\label{anx__write_8h_a11}


Output data from an annodex into a memory buffer. 

Usually the annodex would have been created with {\bf anx\_\-new()}{\rm (p.\,\pageref{anx__general_8h_a5})}. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em annodex}]an ANNODEX$\ast$ writer \item[{\em buf}]a memory buffer of size at least n bytes in which to output \item[{\em n}]a count of bytes to output \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the count of bytes actually output \end{Desc}
\index{anx_write.h@{anx\_\-write.h}!anx_write_set_anno_callbacks@{anx\_\-write\_\-set\_\-anno\_\-callbacks}}
\index{anx_write_set_anno_callbacks@{anx\_\-write\_\-set\_\-anno\_\-callbacks}!anx_write.h@{anx\_\-write.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int anx\_\-write\_\-set\_\-anno\_\-callbacks ({\bf ANNODEX} $\ast$ {\em annodex}, Anx\-Import\-Head {\em import\_\-head\_\-callback}, Anx\-Import\-Clip {\em import\_\-clip\_\-callback}, void $\ast$ {\em user\_\-data})}\label{anx__write_8h_a3}


Override the callbacks that importers should call when they wish to handle annotation elements. 

The default head callback overwrites the head and the default clip callback inserts an clip into the scheduling of the ANNODEX$\ast$ writer. \index{anx_write.h@{anx\_\-write.h}!anx_write_set_ii_callback@{anx\_\-write\_\-set\_\-ii\_\-callback}}
\index{anx_write_set_ii_callback@{anx\_\-write\_\-set\_\-ii\_\-callback}!anx_write.h@{anx\_\-write.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int anx\_\-write\_\-set\_\-ii\_\-callback ({\bf ANNODEX} $\ast$ {\em annodex}, Anx\-Import\-Import {\em import\_\-import\_\-callback}, void $\ast$ {\em user\_\-data})}\label{anx__write_8h_a5}


Override the Import Import callback, used when an importer wishes to initiate further importing. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em annodex}]An ANNODEX$\ast$ writer \item[{\em import\_\-import\_\-callbcak}]The new Import Import callback \item[{\em user\_\-data}]User-defined data to pass to the callback \end{description}
\end{Desc}
