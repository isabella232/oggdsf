\section{cmml-validate.c File Reference}
\label{cmml-validate_8c}\index{cmml-validate.c@{cmml-validate.c}}
{\tt \#include \char`\"{}config.h\char`\"{}}\par
{\tt \#include $<$stdio.h$>$}\par
{\tt \#include $<$stdlib.h$>$}\par
{\tt \#include $<$fcntl.h$>$}\par
{\tt \#include $<$ctype.h$>$}\par
{\tt \#include $<$string.h$>$}\par
{\tt \#include $<$errno.h$>$}\par
{\tt \#include $<$unistd.h$>$}\par
{\tt \#include $<$cmml.h$>$}\par
\subsection*{Defines}
\begin{CompactItemize}
\item 
\#define {\bf BUFSIZE}\ 100000
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
void {\bf Print\-Usage} (char $\ast$prog)
\item 
int {\bf read\_\-stream} ({\bf CMML} $\ast$cmml, const {\bf CMML\_\-Stream} $\ast$stream, void $\ast$user\_\-data)
\item 
int {\bf read\_\-head} ({\bf CMML} $\ast$cmml, const {\bf CMML\_\-Head} $\ast$head, void $\ast$user\_\-data)
\item 
int {\bf read\_\-clip} ({\bf CMML} $\ast$cmml, const {\bf CMML\_\-Clip} $\ast$clip, void $\ast$user\_\-data)
\item 
int {\bf main} (int argc, char $\ast$argv[$\,$])
\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
int {\bf verbose}
\end{CompactItemize}


\subsection{Detailed Description}
cmml-validate: parses a CMML instance document and validates it against the CMML.dtd returning true/false and in case of fault the faulty tag including line and col number. Also spits out warnings for strange stuff.



\footnotesize\begin{verbatim}
Usage: cmml-validate [Options] filename
Validate a CMML file.
 
Possible options:
  -i clip_id, --id clip_id
                 Start parsing from the named clip.
  -s seconds, --sec seconds
                 Start parsing from the given seconds offset
  -u utc,     --utc utc
                 Start parsing from the given utc time
  -b, --verbose  Output parsed file to stdout
  -h, --help     Display this help information
  -v, --version  Display version information
\end{verbatim}
\normalsize


View source code at: {\tt cmml-validate.c}

\subsection{Define Documentation}
\index{cmml-validate.c@{cmml-validate.c}!BUFSIZE@{BUFSIZE}}
\index{BUFSIZE@{BUFSIZE}!cmml-validate.c@{cmml-validate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define BUFSIZE\ 100000}\label{cmml-validate_8c_a0}


the size of the print buffer 

\subsection{Function Documentation}
\index{cmml-validate.c@{cmml-validate.c}!PrintUsage@{PrintUsage}}
\index{PrintUsage@{PrintUsage}!cmml-validate.c@{cmml-validate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Print\-Usage (char $\ast$ {\em prog})\hspace{0.3cm}{\tt  [static]}}\label{cmml-validate_8c_a2}


Print\-Usage: prints out help on how to use this program

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em prog}]the program's name \end{description}
\end{Desc}
\begin{Desc}
\item[Examples: ]\par
{\bf cmml-validate.c}.\end{Desc}
\index{cmml-validate.c@{cmml-validate.c}!read_stream@{read\_\-stream}}
\index{read_stream@{read\_\-stream}!cmml-validate.c@{cmml-validate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int read\_\-stream ({\bf CMML} $\ast$ {\em cmml}, const {\bf CMML\_\-Stream} $\ast$ {\em stream}, void $\ast$ {\em user\_\-data})\hspace{0.3cm}{\tt  [static]}}\label{cmml-validate_8c_a3}


read\_\-stream: the callback for a stream element

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em cmml}]the CMML$\ast$ handle in use \item[{\em stream}]the stream element's content represented in a CMML\_\-Stream$\ast$ \item[{\em user\_\-data}]user defined data\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]0 on success, 1 on error \end{Desc}
\begin{Desc}
\item[Examples: ]\par
{\bf cmml-validate.c}.\end{Desc}
\index{cmml-validate.c@{cmml-validate.c}!read_head@{read\_\-head}}
\index{read_head@{read\_\-head}!cmml-validate.c@{cmml-validate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int read\_\-head ({\bf CMML} $\ast$ {\em cmml}, const {\bf CMML\_\-Head} $\ast$ {\em head}, void $\ast$ {\em user\_\-data})\hspace{0.3cm}{\tt  [static]}}\label{cmml-validate_8c_a4}


read\_\-head: the callback for a head element

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em cmml}]the CMML$\ast$ handle in use \item[{\em head}]the head element's content represented in a CMML\_\-Head$\ast$ \item[{\em user\_\-data}]user defined data\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]0 on success, 1 on error \end{Desc}
\begin{Desc}
\item[Examples: ]\par
{\bf cmml-parse.c}, and {\bf cmml-validate.c}.\end{Desc}
\index{cmml-validate.c@{cmml-validate.c}!read_clip@{read\_\-clip}}
\index{read_clip@{read\_\-clip}!cmml-validate.c@{cmml-validate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int read\_\-clip ({\bf CMML} $\ast$ {\em cmml}, const {\bf CMML\_\-Clip} $\ast$ {\em clip}, void $\ast$ {\em user\_\-data})\hspace{0.3cm}{\tt  [static]}}\label{cmml-validate_8c_a5}


read\_\-clip: the callback for a clip element

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em cmml}]the CMML$\ast$ handle in use \item[{\em clip}]the clip element's content represented in a CMML\_\-Clip$\ast$ \item[{\em user\_\-data}]user defined data\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]0 on success, 1 on error \end{Desc}
\begin{Desc}
\item[Examples: ]\par
{\bf cmml-seek-clip.c}, {\bf cmml-seek-offset.c}, {\bf cmml-seek-utc.c}, {\bf cmml-uri-file.c}, and {\bf cmml-validate.c}.\end{Desc}
\index{cmml-validate.c@{cmml-validate.c}!main@{main}}
\index{main@{main}!cmml-validate.c@{cmml-validate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int main (int {\em argc}, char $\ast$ {\em argv}[$\,$])}\label{cmml-validate_8c_a6}


main function of cmml-validate, which opens the CMML file, seeks to any given offsets, registers the callbacks, and then steps through the file in chunks of BUFSIZE size, during which the callbacks get activated as the relevant elements get parsed. \begin{Desc}
\item[Examples: ]\par
{\bf cmml-parse.c}, {\bf cmml-seek-clip.c}, {\bf cmml-seek-offset.c}, {\bf cmml-seek-utc.c}, {\bf cmml-uri-file.c}, {\bf cmml-validate.c}, and {\bf cmml-write.c}.\end{Desc}


\subsection{Variable Documentation}
\index{cmml-validate.c@{cmml-validate.c}!verbose@{verbose}}
\index{verbose@{verbose}!cmml-validate.c@{cmml-validate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf verbose}\hspace{0.3cm}{\tt  [static]}}\label{cmml-validate_8c_a1}


verbose: turns on printing of parsed CMML file 