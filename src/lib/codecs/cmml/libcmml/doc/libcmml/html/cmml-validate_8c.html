<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libcmml: cmml-validate.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>cmml-validate.c File Reference</h1><code>#include "config.h"</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;fcntl.h&gt;</code><br>
<code>#include &lt;ctype.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;errno.h&gt;</code><br>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &lt;<a class="el" href="cmml_8h-source.html">cmml.h</a>&gt;</code><br>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="cmml-validate_8c.html#a0">BUFSIZE</a>&nbsp;&nbsp;&nbsp;100000</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="cmml-validate_8c.html#a2">PrintUsage</a> (char *prog)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="cmml-validate_8c.html#a3">read_stream</a> (<a class="el" href="cmml_8h.html#a0">CMML</a> *cmml, const <a class="el" href="structCMML__Stream.html">CMML_Stream</a> *stream, void *user_data)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="cmml-validate_8c.html#a4">read_head</a> (<a class="el" href="cmml_8h.html#a0">CMML</a> *cmml, const <a class="el" href="structCMML__Head.html">CMML_Head</a> *head, void *user_data)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="cmml-validate_8c.html#a5">read_clip</a> (<a class="el" href="cmml_8h.html#a0">CMML</a> *cmml, const <a class="el" href="structCMML__Clip.html">CMML_Clip</a> *clip, void *user_data)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="cmml-validate_8c.html#a6">main</a> (int argc, char *argv[])</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="cmml-validate_8c.html#a1">verbose</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
cmml-validate: parses a CMML instance document and validates it against the CMML.dtd returning true/false and in case of fault the faulty tag including line and col number. Also spits out warnings for strange stuff.<p>
<div class="fragment"><pre>
Usage: cmml-validate [Options] filename
Validate a CMML file.
 
Possible options:
  -i clip_id, --id clip_id
                 Start parsing from the named clip.
  -s seconds, --sec seconds
                 Start parsing from the given seconds offset
  -u utc,     --utc utc
                 Start parsing from the given utc time
  -b, --verbose  Output parsed file to stdout
  -h, --help     Display this help information
  -v, --version  Display version information
</pre></div><p>
View source code at: <a href="cmml-validate_8c-example.html">cmml-validate.c</a><hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="cmml-validate.c::BUFSIZE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUFSIZE&nbsp;&nbsp;&nbsp;100000
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
the size of the print buffer     </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a2" doxytag="cmml-validate.c::PrintUsage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void PrintUsage </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>prog</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
PrintUsage: prints out help on how to use this program<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>prog</em>&nbsp;</td><td>the program's name </td></tr>
  </table>
</dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="cmml-validate_8c-example.html#a44">cmml-validate.c</a>.</dl>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="cmml-validate.c::read_stream" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int read_stream </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="cmml_8h.html#a0">CMML</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>cmml</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="structCMML__Stream.html">CMML_Stream</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>stream</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>user_data</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
read_stream: the callback for a stream element<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>cmml</em>&nbsp;</td><td>the CMML* handle in use </td></tr>
    <tr><td valign=top><em>stream</em>&nbsp;</td><td>the stream element's content represented in a CMML_Stream* </td></tr>
    <tr><td valign=top><em>user_data</em>&nbsp;</td><td>user defined data</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, 1 on error </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="cmml-validate_8c-example.html#a45">cmml-validate.c</a>.</dl>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="cmml-validate.c::read_head" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int read_head </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="cmml_8h.html#a0">CMML</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>cmml</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="structCMML__Head.html">CMML_Head</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>head</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>user_data</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
read_head: the callback for a head element<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>cmml</em>&nbsp;</td><td>the CMML* handle in use </td></tr>
    <tr><td valign=top><em>head</em>&nbsp;</td><td>the head element's content represented in a CMML_Head* </td></tr>
    <tr><td valign=top><em>user_data</em>&nbsp;</td><td>user defined data</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, 1 on error </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="cmml-parse_8c-example.html#a0">cmml-parse.c</a>, and <a class="el" href="cmml-validate_8c-example.html#a51">cmml-validate.c</a>.</dl>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="cmml-validate.c::read_clip" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int read_clip </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="cmml_8h.html#a0">CMML</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>cmml</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="structCMML__Clip.html">CMML_Clip</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>clip</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>user_data</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
read_clip: the callback for a clip element<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>cmml</em>&nbsp;</td><td>the CMML* handle in use </td></tr>
    <tr><td valign=top><em>clip</em>&nbsp;</td><td>the clip element's content represented in a CMML_Clip* </td></tr>
    <tr><td valign=top><em>user_data</em>&nbsp;</td><td>user defined data</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, 1 on error </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="cmml-seek-clip_8c-example.html#a8">cmml-seek-clip.c</a>, <a class="el" href="cmml-seek-offset_8c-example.html#a17">cmml-seek-offset.c</a>, <a class="el" href="cmml-seek-utc_8c-example.html#a26">cmml-seek-utc.c</a>, <a class="el" href="cmml-uri-file_8c-example.html#a35">cmml-uri-file.c</a>, and <a class="el" href="cmml-validate_8c-example.html#a54">cmml-validate.c</a>.</dl>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="cmml-validate.c::main" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int main </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>argc</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>argv</em>[]</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
main function of cmml-validate, which opens the CMML file, seeks to any given offsets, registers the callbacks, and then steps through the file in chunks of BUFSIZE size, during which the callbacks get activated as the relevant elements get parsed. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="cmml-parse_8c-example.html#a3">cmml-parse.c</a>, <a class="el" href="cmml-seek-clip_8c-example.html#a11">cmml-seek-clip.c</a>, <a class="el" href="cmml-seek-offset_8c-example.html#a20">cmml-seek-offset.c</a>, <a class="el" href="cmml-seek-utc_8c-example.html#a29">cmml-seek-utc.c</a>, <a class="el" href="cmml-uri-file_8c-example.html#a38">cmml-uri-file.c</a>, <a class="el" href="cmml-validate_8c-example.html#a57">cmml-validate.c</a>, and <a class="el" href="cmml-write_8c-example.html#a71">cmml-write.c</a>.</dl>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a1" doxytag="cmml-validate.c::verbose" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int <a class="el" href="cmml-validate_8c.html#a1">verbose</a><code> [static]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
verbose: turns on printing of parsed CMML file     </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu Mar 11 13:52:17 2004 for libcmml by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
