\section{comments.h File Reference}
\label{comments_8h}\index{comments.h@{comments.h}}
Encoding and decoding of comments.  


{\tt \#include $<$fishsound/fishsound.h$>$}\par
\subsection*{Data Structures}
\begin{CompactItemize}
\item 
struct {\bf Fish\-Sound\-Comment}
\begin{CompactList}\small\item\em A comment. \item\end{CompactList}\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
const char $\ast$ {\bf fish\_\-sound\_\-comment\_\-get\_\-vendor} ({\bf Fish\-Sound} $\ast$fsound)
\begin{CompactList}\small\item\em Retrieve the vendor string. \item\end{CompactList}\item 
const {\bf Fish\-Sound\-Comment} $\ast$ {\bf fish\_\-sound\_\-comment\_\-first} ({\bf Fish\-Sound} $\ast$fsound)
\begin{CompactList}\small\item\em Retrieve the first comment. \item\end{CompactList}\item 
const {\bf Fish\-Sound\-Comment} $\ast$ {\bf fish\_\-sound\_\-comment\_\-next} ({\bf Fish\-Sound} $\ast$fsound, const {\bf Fish\-Sound\-Comment} $\ast$comment)
\begin{CompactList}\small\item\em Retrieve the next comment. \item\end{CompactList}\item 
const {\bf Fish\-Sound\-Comment} $\ast$ {\bf fish\_\-sound\_\-comment\_\-first\_\-byname} ({\bf Fish\-Sound} $\ast$fsound, char $\ast$name)
\begin{CompactList}\small\item\em Retrieve the first comment with a given name. \item\end{CompactList}\item 
const {\bf Fish\-Sound\-Comment} $\ast$ {\bf fish\_\-sound\_\-comment\_\-next\_\-byname} ({\bf Fish\-Sound} $\ast$fsound, const {\bf Fish\-Sound\-Comment} $\ast$comment)
\begin{CompactList}\small\item\em Retrieve the next comment following and with the same name as a given comment. \item\end{CompactList}\item 
int {\bf fish\_\-sound\_\-comment\_\-add} ({\bf Fish\-Sound} $\ast$fsound, {\bf Fish\-Sound\-Comment} $\ast$comment)
\begin{CompactList}\small\item\em Add a comment. \item\end{CompactList}\item 
int {\bf fish\_\-sound\_\-comment\_\-add\_\-byname} ({\bf Fish\-Sound} $\ast$fsound, const char $\ast$name, const char $\ast$value)
\begin{CompactList}\small\item\em Add a comment by name and value. \item\end{CompactList}\item 
int {\bf fish\_\-sound\_\-comment\_\-remove} ({\bf Fish\-Sound} $\ast$fsound, {\bf Fish\-Sound\-Comment} $\ast$comment)
\begin{CompactList}\small\item\em Remove a comment. \item\end{CompactList}\item 
int {\bf fish\_\-sound\_\-comment\_\-remove\_\-byname} ({\bf Fish\-Sound} $\ast$fsound, char $\ast$name)
\begin{CompactList}\small\item\em Remove all comments with a given name. \item\end{CompactList}\end{CompactItemize}


\subsection{Detailed Description}
Encoding and decoding of comments. 

Vorbis and Speex bitstreams use a comment format called \char`\"{}Vorbiscomment\char`\"{}, defined {\tt here}. Many standard comment names (such as TITLE, COPYRIGHT and GENRE) are defined in that document.

The following general features of Vorbiscomment are relevant to this API:\begin{itemize}
\item Each stream has one comment packet, which occurs before any encoded audio data in the stream.\item When encoding, Fish\-Sound will generate the comment block and pass it to the encoded() callback in sequence, just like any other packet. Hence, all comments must be set before any call to {\bf fish\_\-sound\_\-encode()}{\rm (p.\,\pageref{fishsound_8h_a8})}.\item When decoding, Fish\-Sound will decode the comment block before calling the first decoded() callback. Hence, retrieving comment data is possible from as soon as the decoded() callback is first called.\end{itemize}


Each comment block contains one Vendor string, which can be retrieved with {\bf fish\_\-sound\_\-comment\_\-get\_\-vendor()}{\rm (p.\,\pageref{comments_8h_a0})}. When encoding, this string is effectively fixed by the codec libraries; it cannot be set by the application.

The rest of a comment block consists of {\em name\/} = {\em value\/} pairs, with the following restrictions:\begin{itemize}
\item Both the {\em name\/} and {\em value\/} must be non-empty\item The {\em name\/} is case-insensitive and must consist of ASCII within the range 0x20 to 0x7D inclusive, 0x3D ('=') excluded.\item The {\em name\/} is not unique; multiple entries may exist with equivalent {\em name\/} within a Vorbiscomment block.\item The {\em value\/} may be any UTF-8 string.\end{itemize}
\subsection{Retrieving comments}\label{comments_get}
Fish\-Sound contains API methods to iterate through all comments associated with a Fish\-Sound$\ast$ handle ({\bf fish\_\-sound\_\-comment\_\-first()}{\rm (p.\,\pageref{comments_8h_a1})} and {\bf fish\_\-sound\_\-comment\_\-next()}{\rm (p.\,\pageref{comments_8h_a2})}, and to iterate through comments matching a particular name ({\bf fish\_\-sound\_\-comment\_\-first\_\-byname()}{\rm (p.\,\pageref{comments_8h_a3})} and {\bf fish\_\-sound\_\-comment\_\-next\_\-byname()}{\rm (p.\,\pageref{comments_8h_a4})}). Given that multiple comments may exist with the same {\em name\/}, you should not use {\bf fish\_\-sound\_\-comment\_\-first\_\-byname()}{\rm (p.\,\pageref{comments_8h_a3})} as a simple \char`\"{}get\char`\"{} function.\subsection{Encoding comments}\label{comments_set}
For encoding, Fish\-Sound contains API methods for adding comments ({\bf fish\_\-sound\_\-comment\_\-add()}{\rm (p.\,\pageref{comments_8h_a5})} and {\bf fish\_\-sound\_\-comment\_\-add\_\-byname()}{\rm (p.\,\pageref{comments_8h_a6})} and for removing comments ({\bf fish\_\-sound\_\-comment\_\-remove()}{\rm (p.\,\pageref{comments_8h_a7})} and {\bf fish\_\-sound\_\-comment\_\-remove\_\-byname()}{\rm (p.\,\pageref{comments_8h_a8})}).

\subsection{Function Documentation}
\index{comments.h@{comments.h}!fish_sound_comment_add@{fish\_\-sound\_\-comment\_\-add}}
\index{fish_sound_comment_add@{fish\_\-sound\_\-comment\_\-add}!comments.h@{comments.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int fish\_\-sound\_\-comment\_\-add ({\bf Fish\-Sound} $\ast$ {\em fsound}, {\bf Fish\-Sound\-Comment} $\ast$ {\em comment})}\label{comments_8h_a5}


Add a comment. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em fsound}]A Fish\-Sound$\ast$ handle (created with mode FISH\_\-SOUND\_\-ENCODE) \item[{\em comment}]The comment to add \end{description}
\end{Desc}
\begin{Desc}
\item[Return values:]
\begin{description}
\item[{\em 0}]Success \item[{\em FISH\_\-SOUND\_\-ERR\_\-BAD}]{\em fsound\/} is not a valid Fish\-Sound$\ast$ handle \item[{\em FISH\_\-SOUND\_\-ERR\_\-INVALID}]Operation not suitable for this Fish\-Sound \end{description}
\end{Desc}
\index{comments.h@{comments.h}!fish_sound_comment_add_byname@{fish\_\-sound\_\-comment\_\-add\_\-byname}}
\index{fish_sound_comment_add_byname@{fish\_\-sound\_\-comment\_\-add\_\-byname}!comments.h@{comments.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int fish\_\-sound\_\-comment\_\-add\_\-byname ({\bf Fish\-Sound} $\ast$ {\em fsound}, const char $\ast$ {\em name}, const char $\ast$ {\em value})}\label{comments_8h_a6}


Add a comment by name and value. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em fsound}]A Fish\-Sound$\ast$ handle (created with mode FISH\_\-SOUND\_\-ENCODE) \item[{\em name}]The name of the comment to add \item[{\em value}]The contents of the comment to add \end{description}
\end{Desc}
\begin{Desc}
\item[Return values:]
\begin{description}
\item[{\em 0}]Success \item[{\em FISH\_\-SOUND\_\-ERR\_\-BAD}]{\em fsound\/} is not a valid Fish\-Sound$\ast$ handle \item[{\em FISH\_\-SOUND\_\-ERR\_\-INVALID}]Operation not suitable for this Fish\-Sound \end{description}
\end{Desc}
\index{comments.h@{comments.h}!fish_sound_comment_first@{fish\_\-sound\_\-comment\_\-first}}
\index{fish_sound_comment_first@{fish\_\-sound\_\-comment\_\-first}!comments.h@{comments.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}const {\bf Fish\-Sound\-Comment}$\ast$ fish\_\-sound\_\-comment\_\-first ({\bf Fish\-Sound} $\ast$ {\em fsound})}\label{comments_8h_a1}


Retrieve the first comment. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em fsound}]A Fish\-Sound$\ast$ handle \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]A read-only copy of the first comment, or NULL if no comments exist for this Fish\-Sound$\ast$ object. \end{Desc}
\index{comments.h@{comments.h}!fish_sound_comment_first_byname@{fish\_\-sound\_\-comment\_\-first\_\-byname}}
\index{fish_sound_comment_first_byname@{fish\_\-sound\_\-comment\_\-first\_\-byname}!comments.h@{comments.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}const {\bf Fish\-Sound\-Comment}$\ast$ fish\_\-sound\_\-comment\_\-first\_\-byname ({\bf Fish\-Sound} $\ast$ {\em fsound}, char $\ast$ {\em name})}\label{comments_8h_a3}


Retrieve the first comment with a given name. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em fsound}]A Fish\-Sound$\ast$ handle \item[{\em name}]the name of the comment to retrieve. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]A read-only copy of the first comment matching the given {\em name\/}. \end{Desc}
\begin{Desc}
\item[Return values:]
\begin{description}
\item[{\em NULL}]no match was found. \end{description}
\end{Desc}
\begin{Desc}
\item[Note:]If {\em name\/} is NULL, the behaviour is the same as for {\bf fish\_\-sound\_\-comment\_\-first()}{\rm (p.\,\pageref{comments_8h_a1})} \end{Desc}
\index{comments.h@{comments.h}!fish_sound_comment_get_vendor@{fish\_\-sound\_\-comment\_\-get\_\-vendor}}
\index{fish_sound_comment_get_vendor@{fish\_\-sound\_\-comment\_\-get\_\-vendor}!comments.h@{comments.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ fish\_\-sound\_\-comment\_\-get\_\-vendor ({\bf Fish\-Sound} $\ast$ {\em fsound})}\label{comments_8h_a0}


Retrieve the vendor string. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em fsound}]A Fish\-Sound$\ast$ handle \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]A read-only copy of the vendor string \end{Desc}
\begin{Desc}
\item[Return values:]
\begin{description}
\item[{\em NULL}]No vendor string is associated with {\em fsound\/}, or {\em fsound\/} is NULL. \end{description}
\end{Desc}
\index{comments.h@{comments.h}!fish_sound_comment_next@{fish\_\-sound\_\-comment\_\-next}}
\index{fish_sound_comment_next@{fish\_\-sound\_\-comment\_\-next}!comments.h@{comments.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}const {\bf Fish\-Sound\-Comment}$\ast$ fish\_\-sound\_\-comment\_\-next ({\bf Fish\-Sound} $\ast$ {\em fsound}, const {\bf Fish\-Sound\-Comment} $\ast$ {\em comment})}\label{comments_8h_a2}


Retrieve the next comment. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em fsound}]A Fish\-Sound$\ast$ handle \item[{\em comment}]The previous comment. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]A read-only copy of the comment immediately following the given comment. \end{Desc}
\index{comments.h@{comments.h}!fish_sound_comment_next_byname@{fish\_\-sound\_\-comment\_\-next\_\-byname}}
\index{fish_sound_comment_next_byname@{fish\_\-sound\_\-comment\_\-next\_\-byname}!comments.h@{comments.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}const {\bf Fish\-Sound\-Comment}$\ast$ fish\_\-sound\_\-comment\_\-next\_\-byname ({\bf Fish\-Sound} $\ast$ {\em fsound}, const {\bf Fish\-Sound\-Comment} $\ast$ {\em comment})}\label{comments_8h_a4}


Retrieve the next comment following and with the same name as a given comment. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em fsound}]A Fish\-Sound$\ast$ handle \item[{\em comment}]A comment \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]A read-only copy of the next comment with the same name as {\em comment\/}. \end{Desc}
\begin{Desc}
\item[Return values:]
\begin{description}
\item[{\em NULL}]no further comments with the same name exist for this Fish\-Sound$\ast$ object. \end{description}
\end{Desc}
\index{comments.h@{comments.h}!fish_sound_comment_remove@{fish\_\-sound\_\-comment\_\-remove}}
\index{fish_sound_comment_remove@{fish\_\-sound\_\-comment\_\-remove}!comments.h@{comments.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int fish\_\-sound\_\-comment\_\-remove ({\bf Fish\-Sound} $\ast$ {\em fsound}, {\bf Fish\-Sound\-Comment} $\ast$ {\em comment})}\label{comments_8h_a7}


Remove a comment. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em fsound}]A Fish\-Sound$\ast$ handle (created with FISH\_\-SOUND\_\-ENCODE) \item[{\em comment}]The comment to remove. \end{description}
\end{Desc}
\begin{Desc}
\item[Return values:]
\begin{description}
\item[{\em 1}]Success: comment removed \item[{\em 0}]No-op: comment not found, nothing to remove \item[{\em FISH\_\-SOUND\_\-ERR\_\-BAD}]{\em fsound\/} is not a valid Fish\-Sound$\ast$ handle \item[{\em FISH\_\-SOUND\_\-ERR\_\-INVALID}]Operation not suitable for this Fish\-Sound \end{description}
\end{Desc}
\index{comments.h@{comments.h}!fish_sound_comment_remove_byname@{fish\_\-sound\_\-comment\_\-remove\_\-byname}}
\index{fish_sound_comment_remove_byname@{fish\_\-sound\_\-comment\_\-remove\_\-byname}!comments.h@{comments.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int fish\_\-sound\_\-comment\_\-remove\_\-byname ({\bf Fish\-Sound} $\ast$ {\em fsound}, char $\ast$ {\em name})}\label{comments_8h_a8}


Remove all comments with a given name. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em fsound}]A Fish\-Sound$\ast$ handle (created with FISH\_\-SOUND\_\-ENCODE) \item[{\em name}]The name of the comments to remove \end{description}
\end{Desc}
\begin{Desc}
\item[Return values:]
\begin{description}
\item[{\em $>$= 0}]The number of comments removed \item[{\em FISH\_\-SOUND\_\-ERR\_\-BAD}]{\em fsound\/} is not a valid Fish\-Sound$\ast$ handle \item[{\em FISH\_\-SOUND\_\-ERR\_\-INVALID}]Operation not suitable for this Fish\-Sound \end{description}
\end{Desc}
